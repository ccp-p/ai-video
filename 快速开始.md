# 视频字幕生成与AI总结工具 - 快速开始

## 🎯 一句话说明
这个工具能让你的视频自动变成SRT字幕 + 视频截图 + AI智能总结！

## 📦 已完成下载的文件
- ✅ `ccode_enhanced.exe` - 主程序（已编译好）
- ✅ `start.bat` - Windows一键启动脚本
- ✅ `README.md` - 详细说明文档
- ✅ `main_enhanced.go` - 源代码（如需修改）

## 🚀 快速使用（3个步骤）

### 步骤1：安装FFmpeg（如果未安装）
1. 下载FFmpeg：https://ffmpeg.org/download.html
2. 解压到 `C:\ffmpeg`
3. 添加到系统环境变量PATH：
   - 右键"此电脑" → 属性 → 高级系统设置 → 环境变量
   - 找到Path，添加 `C:\ffmpeg\bin`

### 步骤2：启动HTTP服务
双击运行 `start.bat`，选择 `1` 启动HTTP服务
```
HTTP服务启动在端口: 8080
访问地址: http://localhost:8080
```

### 步骤3：在浏览器中使用
打开浏览器访问：`http://localhost:8080`

## 📝 功能使用指南

### 功能1：视频处理 (一键生成字幕)
1. 点击"视频处理"标签
2. 输入视频文件完整路径，例如：
   - `D:\videos\我的视频.mp4`
   - `C:\Users\你的用户名\Desktop\tutorial.mp4`
3. 点击"开始处理视频"
4. 等待处理完成，查看结果

输出文件在视频同目录的 `output_视频名` 文件夹：
- `audio.mp3` - 提取的音频
- `subtitles.srt` - SRT字幕文件
- `screenshot_1.jpg` ~ `screenshot_5.jpg` - 视频截图

### 功能2：AI总结 (任意文本或SRT字幕)
1. 点击"AI总结"标签
2. 选择方式：
   **方式A**：直接在文本框粘贴或输入内容
   **方式B**：点击"上传SRT/文本文件"按钮，选择SRT文件
3. （可选）填写视频截图路径，用逗号分隔多个：
   - `D:\videos\output_视频名\screenshot_1.jpg, D:\videos\output_视频名\screenshot_2.jpg`
4. （可选）填写自定义Prompt，例如：
   ```
   请提取3-5个核心要点，用Markdown格式输出，包含关键词
   ```
5. 点击"AI智能总结"
6. 查看Markdown格式的总结报告

### 功能3：配置AI API（可选）
如果不配置，系统会使用本地算法生成基础总结。

配置其他AI服务：
1. 点击"AI配置"标签
2. 填写所需信息：

**OpenAI示例：**
```
API Key: sk-xxxxxxxxxxxxx
API URL: https://api.openai.com/v1/chat/completions
Model: gpt-4
```

**文心一言示例：**
```
API Key: your-wenxin-key
API URL: https://aip.baidubce.com/rpc/2.0/ai_custom/v1/wenxinworkshop/chat/completions
Model: ernie-bot
```

3. 点击"保存配置"
4. 在AI总结页面会自动使用配置的API

## 💡 常用命令

### 1. HTTP服务模式（推荐）
```bash
# 方式1：使用启动脚本
start.bat  # 然后选择 1

# 方式2：直接命令行
ccode_enhanced.exe -mode server -port 8080
```

### 2. 命令行处理视频
```bash
# 方式1：使用启动脚本
start.bat  # 然后选择 2，输入视频路径

# 方式2：直接命令行
ccode_enhanced.exe -mode cli -video "D:\videos\demo.mp4"
```

### 3. 仅处理音频（已有MP3文件）
```bash
ccode_enhanced.exe -mode cli -audio "D:\videos\audio.mp3" -cache true
```

## 🎓 实际演示示例

### 示例1：处理教学视频
1. 视频位置：`D:\课程\第1课.mp4`（5分钟）
2. 启动服务：双击 `start.bat` → 选 `1`
3. 访问浏览器：`http://localhost:8080`
4. 视频处理标签输入：`D:\课程\第1课.mp4`
5. 点击处理，等待约2分钟
6. 获得：
   - 完整SRT字幕文件
   - 5张关键截图
   - 音频MP3文件

### 示例2：总结会议录音
1. 上传：会议录音转文字的SRT文件
2. 配置Prompt：
   ```
   提取会议的核心决策点，列出待办事项，并生成会议纪要格式
   ```
3. 点击总结
4. 获得结构化的会议总结（要点+完整内容+Markdown）

## 🔧 故障排除

### 问题1：提示"未找到ffmpeg"
**解决**：安装FFmpeg并添加到系统PATH

### 问题2：ASR识别失败/超时
**可能原因**：
- 网络不稳定
- 视频文件太大（建议先压缩音频）
- B站API限制

**临时解决**：使用缓存功能，避免重复上传

### 问题3：端口8080被占用
**解决**：
```bash
ccode_enhanced.exe -mode server -port 9090
```

### 问题4：视频路径错误
**提示**：Windows路径用双引号包含，避免空格问题
```bash
正确：-video "D:\My Videos\video.mp4"
错误：-video D:\My Videos\video.mp4
```

## 📊 性能说明

### 处理时间参考
- 1分钟视频 → 约20-30秒
- 5分钟视频 → 约1-2分钟
- 10分钟视频 → 约2-4分钟

### 网络需求
- 需要联网进行ASR识别
- 上传文件到B站服务器（加密传输）

### 硬盘需求
- 缓存目录：会保存已识别的音频MD5
- 输出目录：视频文件大小 + 截图约1MB

## 🎯 最佳实践

1. **视频准备**：
   - 清晰的语音质量
   - 建议时长 1-20分钟
   - 常见格式：MP4, AVI, MKV

2. **AI总结技巧**：
   - 先用字幕片段测试Prompt效果
   - 多次迭代优化Prompt
   - 结合截图信息理解上下文

3. **批量处理**：
   - 可以编写批处理脚本循环处理
   - 使用 -cache true 避免重复识别

## 📞 获得帮助

### 查看详细日志
程序运行时会输出详细日志，包含：
- 上传进度
- 识别状态
- 缓存命中情况
- 错误信息

### 常用调试信息
- 检查文件是否存在：`dir "D:\路径"`
- 测试FFmpeg：`ffmpeg -version`
- 测试网络：`ping www.bilibili.com`

---

**使用愉快！** 🎉

遇到问题？
1. 仔细阅读控制台错误信息
2. 参考README.md完整文档
3. 检查浏览器控制台错误（F12）
